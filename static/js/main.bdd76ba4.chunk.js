(this["webpackJsonpblog-admin"]=this["webpackJsonpblog-admin"]||[]).push([[0],{45:function(e,t,n){},47:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(31),r=n.n(a),s=n(1),c=n.n(s),i=n(32),o=n.n(i),u=n(9),l=(n(42),n(43),n(45),n(2)),p=n.n(l),d=n(4),b=n(3),j=n(6),m=n(5),h=n(35);function f(){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(p.a.mark((function e(){var t,n,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,fetch(t,{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(p.a.mark((function e(t){var n,a,r,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"",a=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,fetch(n,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify(a)});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("PUT","".concat("https://blog-api-97575.herokuapp.com","/posts/").concat(t._id),Object(b.a)(Object(b.a)({},t),{},{published:!t.published}));case 3:if(!(n=e.sent).err){e.next=8;break}k(n.err),e.next=13;break;case 8:if(!n.errors){e.next=12;break}window.flashes(n.errors),e.next=13;break;case 12:return e.abrupt("return",n.post);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function y(e,t){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://blog-api-97575.herokuapp.com","/posts/").concat(t,"/comments/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).err){e.next=11;break}k(r.err),e.next=12;break;case 11:return e.abrupt("return",r.comment);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function k(e){window.flashes([{msg:e.message}])}var S=n(33),P=new(n.n(S).a),C=(n(47),n(0));var F=function(e){var t=e.type,n=e.size;return Object(C.jsx)("div",{className:"BootstrapSpinner",children:Object(C.jsx)("div",{className:"spinner-".concat(t," text-primary"),style:{width:n,height:n},role:"status",children:Object(C.jsx)("span",{className:"sr-only",children:"Loading..."})})})};var D=function(e){var t=e.user,n=e.signOut;return Object(C.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary sticky-top mb-4",children:[Object(C.jsx)(u.c,{to:"/",className:"navbar-brand",children:"Blog User"}),Object(C.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(C.jsx)("span",{className:"navbar-toggler-icon"})}),Object(C.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(C.jsx)("ul",{className:"navbar-nav ml-auto",children:t?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(u.c,{exact:!0,to:"/posts",className:"nav-link",activeClassName:"active",children:"Posts"})}),Object(C.jsxs)("li",{className:"nav-item dropdown",children:[Object(C.jsx)("button",{className:"nav-link btn btn-link dropdown-toggle",id:"navbarDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:t.username}),Object(C.jsx)("div",{className:"dropdown-menu dropdown-menu-right",children:Object(C.jsx)("button",{className:"dropdown-item",type:"button",onClick:n,children:"Sign out"})})]})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(u.c,{exact:!0,to:"/sign-up",className:"nav-link",activeClassName:"active",children:"Sign Up"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(u.c,{exact:!0,to:"/sign-in",className:"nav-link",activeClassName:"active",children:"Sign In"})})]})})})]})};var U=function(e){var t=e.flashes,n=e.handleFlashDelete;return Object(C.jsx)(C.Fragment,{children:t.map((function(e){return Object(C.jsxs)("div",{className:"alert alert-".concat(e.type||"danger"," alert-dismissible"),role:"alert",children:[e.msg,Object(C.jsx)("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return n(e.id)},children:Object(C.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]},e.id)}))})},L=function(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){return a(!0),function(){return a(!1)}}),[]),n},T=n(13),q=n.n(T),I=n(18),_=n.n(I);var E=function(e){var t=e.type,n=e.text,a=e.isLoading,r=e.loadingText,s=e.onClick;return a?Object(C.jsxs)("button",{type:"button",className:"btn btn-".concat(t),disabled:!0,children:[Object(C.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),r]}):Object(C.jsx)("button",{type:"button",className:"btn btn-".concat(t),onClick:s,children:n})};var A=function(e){var t=e.user,n=e.postWithComments,a=e.handlePostPublishedUpdate,r=L(),c=Object(s.useState)(!1),i=Object(j.a)(c,2),o=i[0],l=i[1];function b(){return(b=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,a(n);case 3:r&&l(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(C.jsxs)("div",{className:"card mb-2",children:[Object(C.jsxs)("div",{className:"card-header d-flex justify-content-between",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("h5",{className:"card-title",children:n.title}),Object(C.jsx)("p",{className:"card-subtitle mb-2",children:n.author.firstName+" "+n.author.lastName}),Object(C.jsx)("p",{className:"card-subtitle",children:_()(new Date(n.createdAt),"PPpp")})]}),Object(C.jsx)("div",{children:t&&Object(C.jsx)(E,{type:n.published?"danger":"warning",text:n.published?"Unpublish":"Publish",isLoading:o,loadingText:"Updating...",onClick:function(){return b.apply(this,arguments)}})})]}),Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("p",{className:"card-text",children:n.body}),Object(C.jsxs)(u.b,{to:"/posts/".concat(n._id),className:"card-link",children:[n.comments.length," comments"]})]})]})};function z(e){var t=e.user,n=e.postsWithComments,a=e.handlePostPublishedUpdate,r=n.map((function(e){return Object(C.jsx)(A,{user:t,postWithComments:e,handlePostPublishedUpdate:a},e._id)}));return Object(C.jsx)(C.Fragment,{children:r})}z.propTypes={user:q.a.oneOfType([q.a.bool,q.a.object]).isRequired,postsWithComments:q.a.array.isRequired,handlePostPublishedUpdate:q.a.func.isRequired};var B=z;var W=function(e){var t=e.user,n=L(),a=Object(s.useState)([]),r=Object(j.a)(a,2),c=r[0],i=r[1],o=Object(s.useState)(!1),u=Object(j.a)(o,2),l=u[0],m=u[1];function h(){return(h=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:a=e.sent,n&&a._id&&i((function(e){return e.map((function(e){return e._id!==t._id?e:Object(b.a)(Object(b.a)({},e),{},{published:a.published})}))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var t,a,r,s,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){return(s=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.map(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat("https://blog-api-97575.herokuapp.com","/posts/").concat(t._id,"/comments"));case 3:if(!(n=e.sent).err){e.next=8;break}k(n.err),e.next=9;break;case 8:return e.abrupt("return",Object(b.a)(Object(b.a)({},t),{},{comments:n.comments}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)},r=function(e){return s.apply(this,arguments)},a=function(){return(a=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat("https://blog-api-97575.herokuapp.com","/posts"));case 3:if(!(t=e.sent).err){e.next=8;break}k(t.err),e.next=9;break;case 8:return e.abrupt("return",t.posts);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)},t=function(){return a.apply(this,arguments)},!n){e.next=14;break}return m(!0),e.next=8,t();case 8:return c=e.sent,e.next=11,r(c);case 11:o=e.sent,m(!1),i(o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),l?Object(C.jsx)("div",{className:"bootstrap-spinner-container",children:Object(C.jsx)(F,{type:"border",size:"2em"})}):Object(C.jsx)("section",{className:"position-relative",children:Object(C.jsx)(B,{user:t,postsWithComments:c,handlePostPublishedUpdate:function(e){return h.apply(this,arguments)}})})};var J=function(e){var t=e.user;return Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row justify-content-center",children:Object(C.jsx)("div",{className:"col-md-8",children:Object(C.jsx)(W,{user:t})})})})};var R=function(e){var t=e.postComment,n=e.handlePostCommentDelete,a=L(),r=Object(s.useState)(!1),c=Object(j.a)(r,2),i=c[0],o=c[1];function u(){return(u=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,n(t._id);case 3:a&&o(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(C.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{className:"h6 mb-1",children:t.author.firstName+" "+t.author.lastName}),Object(C.jsx)("p",{className:"text-muted mb-2",children:_()(new Date(t.createdAt),"PPpp")}),Object(C.jsx)("p",{className:"mb-2",children:t.body})]}),Object(C.jsx)("div",{children:Object(C.jsx)(E,{type:"danger",text:"Delete",isLoading:i,loadingText:"Deleting...",onClick:function(){return u.apply(this,arguments)}})})]})};var Y=function(e){var t=e.postComments,n=e.handlePostCommentDelete;return t.length>0?Object(C.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(C.jsx)(R,{postComment:e,handlePostCommentDelete:n},e._id)}))}):null};var G=function(e){var t=e.user,n=Object(m.h)().postId,a=Object(m.g)(),r=L(),c=Object(s.useState)(!1),i=Object(j.a)(c,2),o=i[0],u=i[1],l=Object(s.useState)({}),h=Object(j.a)(l,2),x=h[0],O=h[1];function v(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat("https://blog-api-97575.herokuapp.com","/posts/").concat(t,"/comments"));case 3:if(!(n=e.sent).err){e.next=8;break}k(n.err),e.next=9;break;case 8:return e.abrupt("return",n.comments);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function N(){return(N=Object(d.a)(p.a.mark((function e(){var t,s,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){return(s=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat("https://blog-api-97575.herokuapp.com","/posts/").concat(t));case 3:if(!(n=e.sent).err){e.next=9;break}[401,404].includes(n.err.status)&&a.push("/"),k(n.err),e.next=10;break;case 9:return e.abrupt("return",n.post);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)},t=function(e){return s.apply(this,arguments)},!r){e.next=12;break}return u(!0),e.next=6,t(n);case 6:return c=e.sent,e.next=9,v(n);case 9:i=e.sent,u(!1),O(Object(b.a)(Object(b.a)({},c),{},{comments:i}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:n=e.sent,r&&n._id&&O((function(e){return Object(b.a)(Object(b.a)({},e),{},{published:n.published})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(n,t);case 2:a=e.sent,r&&a._id&&O((function(e){return Object(b.a)(Object(b.a)({},e),{},{comments:e.comments.filter((function(e){return e._id!==t}))})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){!function(){N.apply(this,arguments)}()}),[r]),o?Object(C.jsx)("div",{className:"bootstrap-spinner-container",children:Object(C.jsx)(F,{type:"border",size:"2em"})}):x._id?Object(C.jsxs)("section",{className:"mb-4",children:[Object(C.jsx)(A,{user:t,postWithComments:x,handlePostPublishedUpdate:function(e){return S.apply(this,arguments)}}),Object(C.jsx)(Y,{postComments:x.comments,handlePostCommentDelete:function(e){return P.apply(this,arguments)}})]}):null};var M=function(e){var t=e.user;return Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row justify-content-center",children:Object(C.jsx)("div",{className:"col-md-8 position-relative",children:Object(C.jsx)(G,{user:t})})})})},H=n(17);function K(e){var t=e.text;return e.isSubmitting?Object(C.jsxs)("button",{type:"submit",className:"btn btn-primary w-100",disabled:!0,children:[Object(C.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Submitting..."]}):Object(C.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:t})}K.defaultProps={text:"Submit"};var Q=K;var V=function(){var e=Object(m.g)(),t=L(),n=Object(s.useState)({firstName:"",lastName:"",username:"",password:"",confirmPassword:"",adminPasscode:""}),a=Object(j.a)(n,2),r=a[0],c=a[1],i=Object(s.useState)(!1),o=Object(j.a)(i,2),u=o[0],l=o[1];function h(e){var t=e.target,n=t.name,a=t.value;c((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(H.a)({},n,a))}))}function f(){return(f=Object(d.a)(p.a.mark((function n(a){var s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a.preventDefault(),l(!0),n.next=5,O("POST","".concat("https://blog-api-97575.herokuapp.com","/users"),Object(b.a)(Object(b.a)({},r),{},{isAdminPasscodeRequired:!0}));case 5:s=n.sent,t&&l(!1),s.err?k(s.err):s.errors?(t&&c({firstName:s.userFormData.firstName,lastName:s.userFormData.lastName,username:s.userFormData.username,password:"",confirmPassword:"",adminPasscode:""}),window.flashes(s.errors)):(window.flashes([{msg:"You have successfuly signed up",type:"success"}]),e.push("/")),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}return Object(C.jsxs)("form",{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"firstName",children:"First name"}),Object(C.jsx)("input",{type:"text",className:"form-control",id:"firstName",placeholder:"John",name:"firstName",value:r.firstName,required:!0,maxLength:"255",onChange:h})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"lastName",children:"Last name"}),Object(C.jsx)("input",{type:"text",className:"form-control",id:"lastName",placeholder:"Doe",name:"lastName",value:r.lastName,required:!0,maxLength:"255",onChange:h})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"username",children:"Username"}),Object(C.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"johnDoe01",name:"username",value:r.username,required:!0,maxLength:"20",onChange:h})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"password",children:"Password"}),Object(C.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",value:r.password,required:!0,minLength:"8",onChange:h})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"confirmPassword",children:"Password confirmation"}),Object(C.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,required:!0,minLength:"8",onChange:h})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"adminPasscode",children:"Admin passcode"}),Object(C.jsx)("input",{type:"password",className:"form-control",id:"adminPasscode",name:"adminPasscode",value:r.adminPasscode,required:!0,onChange:h})]}),Object(C.jsx)(Q,{isSubmitting:u})]})};var X=function(){return Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row justify-content-center",children:Object(C.jsx)("div",{className:"col-md-6",children:Object(C.jsx)(V,{})})})})};var Z=function(e){var t=e.setUser,n=Object(m.g)(),a=L(),r=Object(s.useState)({username:"",password:""}),c=Object(j.a)(r,2),i=c[0],o=c[1],u=Object(s.useState)(!1),l=Object(j.a)(u,2),h=l[0],f=l[1];function x(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(H.a)({},n,a))}))}function v(){return(v=Object(d.a)(p.a.mark((function e(r){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),f(!0),e.next=5,O("POST","".concat("https://blog-api-97575.herokuapp.com","/auth/sign-in"),i);case 5:s=e.sent,a&&f(!1),s.err?(a&&o((function(e){return Object(b.a)(Object(b.a)({},e),{},{password:""})})),k(s.err)):s.user&&s.user.admin?(localStorage.setItem("jwt",s.token),t(s.user),window.flashes([{msg:"You have successfuly signed in",type:"success"}]),n.push("/")):(a&&o({username:"",password:""}),window.flashes([{msg:"Admin account is required",type:"warning"}])),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),window.flashes([{msg:"Something went wrong, please try again later."}]);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(C.jsxs)("form",{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"username",children:"Username"}),Object(C.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"johnDoe01",name:"username",value:i.username,required:!0,maxLength:"20",onChange:x})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"password",children:"Password"}),Object(C.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",value:i.password,required:!0,minLength:"8",onChange:x})]}),Object(C.jsx)(Q,{isSubmitting:h})]})};var $=function(e){var t=e.setUser;return Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row justify-content-center",children:Object(C.jsx)("div",{className:"col-md-6",children:Object(C.jsx)(Z,{setUser:t})})})})};n(76);var ee=function(){var e=Object(m.g)(),t=Object(s.useState)([]),n=Object(j.a)(t,2),a=n[0],r=n[1],c=Object(s.useState)(null),i=Object(j.a)(c,2),o=i[0],u=i[1];return Object(s.useEffect)((function(){P.addListener("flashes",(function(e){var t=e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{id:Object(h.a)()})}));r(t)}))}),[]),Object(s.useEffect)((function(){window.flashes=function(e){return P.emit("flashes",e)}}),[]),Object(s.useEffect)((function(){if(a.length>0){var e=setTimeout((function(){return r([])}),4e3);return function(){return clearTimeout(e)}}}),[a]),Object(s.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("".concat("https://blog-api-97575.herokuapp.com","/users/current-user"));case 2:(t=e.sent).user&&t.user.admin?u(t.user):(localStorage.removeItem("jwt"),u(!1));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e();var n=setInterval(e,3e4);return function(){return clearInterval(n)}}),[]),null===o?Object(C.jsx)(F,{type:"grow",size:"3em"}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(D,{user:o,signOut:function(){localStorage.removeItem("jwt"),u(!1),window.flashes([{msg:"You have successfully signed out",type:"success"}]),e.push("/")}}),a.length>0&&Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row justify-content-center",children:Object(C.jsx)("div",{className:"col-md-8",children:Object(C.jsx)(U,{flashes:a,handleFlashDelete:function(e){var t=a.filter((function(t){return t.id!==e}));r(t)}})})})}),Object(C.jsx)("main",{children:Object(C.jsxs)(m.d,{children:[Object(C.jsx)(m.b,{exact:!0,path:"/",children:Object(C.jsx)(m.a,{to:"/posts"})}),Object(C.jsx)(m.b,{exact:!0,path:"/posts",children:o?Object(C.jsx)(J,{user:o}):Object(C.jsx)(m.a,{to:"/sign-in"})}),Object(C.jsx)(m.b,{exact:!0,path:"/posts/:postId",children:o?Object(C.jsx)(M,{user:o}):Object(C.jsx)(m.a,{to:"/sign-in"})}),Object(C.jsx)(m.b,{exact:!0,path:"/sign-up",children:o?Object(C.jsx)(m.a,{to:"/posts"}):Object(C.jsx)(X,{})}),Object(C.jsx)(m.b,{exact:!0,path:"/sign-in",children:o?Object(C.jsx)(m.a,{to:"posts"}):Object(C.jsx)($,{setUser:u})})]})})]})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};r.a.config(),o.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(u.a,{basename:"/blog-admin",children:Object(C.jsx)(ee,{})})}),document.getElementById("root")),te()}},[[77,1,2]]]);
//# sourceMappingURL=main.bdd76ba4.chunk.js.map