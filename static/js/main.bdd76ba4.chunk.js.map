{"version":3,"sources":["lib/helpers.js","utils/Bus.js","components/BootstrapSpinner.js","components/Navbar.js","components/Flashes.js","lib/useIsMounted.js","components/LoadingBtn.js","components/PostCard.js","components/PostsCards.js","components/Posts.js","pages/PostsPage.js","components/PostComment.js","components/PostComments.js","components/Post.js","pages/PostPage.js","components/SubmitBtn.js","components/SignUpForm.js","pages/SignUpPage.js","components/SignInForm.js","pages/SignInPage.js","App.js","reportWebVitals.js","index.js"],"names":["getData","a","url","fetch","method","headers","Authorization","localStorage","getItem","response","json","uploadData","data","body","JSON","stringify","putPostPublished","post","process","_id","published","err","handleExpressErr","errors","window","flashes","msg","deletePostComment","postId","postCommentId","comment","message","EventEmitter","BootstrapSpinner","type","size","className","style","width","height","role","Navbar","user","signOut","to","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","exact","activeClassName","aria-haspopup","username","onClick","Flashes","handleFlashDelete","map","flash","aria-hidden","useIsMounted","useState","isMounted","setIsMouted","useEffect","LoadingBtn","text","isLoading","loadingText","disabled","PostCard","postWithComments","handlePostPublishedUpdate","isUpdatingPostPublished","setIsUpdatingPostPublished","title","author","firstName","lastName","format","Date","createdAt","comments","length","PostsCards","postsWithComments","Postcards","propTypes","PropTypes","oneOfType","bool","object","isRequired","array","func","Posts","setPostsWithComments","isFetchingPostsWithComments","setIsFetchingPostsWithComments","updatedPost","prevPostsWithComments","prevPostWithComments","fetchPosts","fetchAndAttachPostsToComments","posts","Promise","all","newPostsWithComments","fetchAndSetPostsWithComments","PostsPage","PostComment","postComment","handlePostCommentDelete","isDeletingPostComment","setIsDeletingPostComment","PostComments","postComments","Post","useParams","history","useHistory","isFetchingPostWithComments","setIsFetchingPostWithComments","setPostWithComments","fetchPostComments","fetchPost","includes","status","push","deletedPostComment","filter","fetchAndSetPostWithComments","PostPage","SubmitBtn","isSubmitting","defaultProps","SignUpForm","password","confirmPassword","adminPasscode","state","setState","setIsSubmitting","handleInputChange","e","target","name","value","prevState","preventDefault","isAdminPasscodeRequired","userFormData","onSubmit","htmlFor","placeholder","required","maxLength","onChange","minLength","SignUpPage","SignInForm","setUser","admin","setItem","token","SignInPage","App","setFlashes","Bus","addListener","flashesWithId","nanoid","emit","timeoutId","setTimeout","clearTimeout","fetchAndSetUser","removeItem","intervalId","setInterval","clearInterval","flashId","newFlashes","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","dotenv","config","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.bdd76ba4.chunk.js","sourcesContent":["async function getData(url = '') {\n\tconst response = await fetch(url, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t},\n\t});\n\treturn response.json();\n}\n\nasync function uploadData(method, url = '', data = {}) {\n\tconst response = await fetch(url, {\n\t\tmethod,\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t},\n\t\tbody: JSON.stringify(data),\n\t});\n\treturn response.json();\n}\n\nasync function putPostPublished(post) {\n\ttry {\n\t\tconst data = await uploadData(\n\t\t\t'PUT',\n\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}`,\n\t\t\t{ ...post, published: !post.published }\n\t\t);\n\t\tif (data.err) {\n\t\t\thandleExpressErr(data.err);\n\t\t} else if (data.errors) {\n\t\t\twindow.flashes(data.errors);\n\t\t} else {\n\t\t\treturn data.post;\n\t\t}\n\t} catch (err) {\n\t\twindow.flashes([{ msg: 'Something went wrong, please try again later.' }]);\n\t}\n}\n\nasync function deletePostComment(postId, postCommentId) {\n\ttry {\n\t\tconst response = await fetch(\n\t\t\t`${process.env.REACT_APP_API_URL}/posts/${postId}/comments/${postCommentId}`,\n\t\t\t{\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t\tconst data = await response.json();\n\t\tif (data.err) {\n\t\t\thandleExpressErr(data.err);\n\t\t} else {\n\t\t\treturn data.comment;\n\t\t}\n\t} catch (err) {\n\t\twindow.flashes([{ msg: 'Something went wrong, please try again later.' }]);\n\t}\n}\n\nfunction handleExpressErr(err) {\n\twindow.flashes([{ msg: err.message }]);\n}\n\nexport {\n\tgetData,\n\tuploadData,\n\tputPostPublished,\n\tdeletePostComment,\n\thandleExpressErr,\n};\n","import EventEmitter from 'events';\n\nexport default new EventEmitter();\n","import PropTypes from 'prop-types';\nimport '../css/BootstrapSpinner.css';\n\nfunction BootstrapSpinner({ type, size }) {\n\treturn (\n\t\t<div className=\"BootstrapSpinner\">\n\t\t\t<div\n\t\t\t\tclassName={`spinner-${type} text-primary`}\n\t\t\t\tstyle={{ width: size, height: size }}\n\t\t\t\trole=\"status\"\n\t\t\t>\n\t\t\t\t<span className=\"sr-only\">Loading...</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nBootstrapSpinner.propTypes = {\n\ttype: PropTypes.string.isRequired,\n\tsize: PropTypes.string.isRequired,\n};\n\nexport default BootstrapSpinner;\n","import PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\n\nfunction Navbar({ user, signOut }) {\n\treturn (\n\t\t<nav className=\"navbar navbar-expand-lg navbar-dark bg-primary sticky-top mb-4\">\n\t\t\t<NavLink to=\"/\" className=\"navbar-brand\">\n\t\t\t\tBlog User\n\t\t\t</NavLink>\n\t\t\t<button\n\t\t\t\tclassName=\"navbar-toggler\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tdata-toggle=\"collapse\"\n\t\t\t\tdata-target=\"#navbarSupportedContent\"\n\t\t\t\taria-controls=\"navbarSupportedContent\"\n\t\t\t\taria-expanded=\"false\"\n\t\t\t\taria-label=\"Toggle navigation\"\n\t\t\t>\n\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\n\t\t\t</button>\n\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n\t\t\t\t<ul className=\"navbar-nav ml-auto\">\n\t\t\t\t\t{user ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\tto=\"/posts\"\n\t\t\t\t\t\t\t\t\tclassName=\"nav-link\"\n\t\t\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tPosts\n\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li className=\"nav-item dropdown\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"nav-link btn btn-link dropdown-toggle\"\n\t\t\t\t\t\t\t\t\tid=\"navbarDropdown\"\n\t\t\t\t\t\t\t\t\tdata-toggle=\"dropdown\"\n\t\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{user.username}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div className=\"dropdown-menu dropdown-menu-right\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"dropdown-item\"\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={signOut}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSign out\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\tto=\"/sign-up\"\n\t\t\t\t\t\t\t\t\tclassName=\"nav-link\"\n\t\t\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\tto=\"/sign-in\"\n\t\t\t\t\t\t\t\t\tclassName=\"nav-link\"\n\t\t\t\t\t\t\t\t\tactiveClassName=\"active\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSign In\n\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</nav>\n\t);\n}\n\nNavbar.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n\tsignOut: PropTypes.func.isRequired,\n};\n\nexport default Navbar;\n","import PropTypes from 'prop-types';\n\nfunction Flashes({ flashes, handleFlashDelete }) {\n\treturn (\n\t\t<>\n\t\t\t{flashes.map((flash) => (\n\t\t\t\t<div\n\t\t\t\t\tkey={flash.id}\n\t\t\t\t\tclassName={`alert alert-${flash.type || 'danger'} alert-dismissible`}\n\t\t\t\t\trole=\"alert\"\n\t\t\t\t>\n\t\t\t\t\t{flash.msg}\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"close\"\n\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\tonClick={() => handleFlashDelete(flash.id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</>\n\t);\n}\n\nFlashes.propTypes = {\n\tflashes: PropTypes.array.isRequired,\n\thandleFlashDelete: PropTypes.func.isRequired,\n};\n\nexport default Flashes;\n","import { useEffect, useState } from 'react';\n\nconst useIsMounted = () => {\n\tconst [isMounted, setIsMouted] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetIsMouted(true);\n\t\treturn () => setIsMouted(false);\n\t}, []);\n\n\treturn isMounted;\n};\nexport default useIsMounted;\n","import PropTypes from 'prop-types';\n\nfunction LoadingBtn({ type, text, isLoading, loadingText, onClick }) {\n\treturn isLoading ? (\n\t\t<button type=\"button\" className={`btn btn-${type}`} disabled>\n\t\t\t<span\n\t\t\t\tclassName=\"spinner-border spinner-border-sm\"\n\t\t\t\trole=\"status\"\n\t\t\t\taria-hidden=\"true\"\n\t\t\t></span>\n\t\t\t{loadingText}\n\t\t</button>\n\t) : (\n\t\t<button type=\"button\" className={`btn btn-${type}`} onClick={onClick}>\n\t\t\t{text}\n\t\t</button>\n\t);\n}\n\nLoadingBtn.propTypes = {\n\ttype: PropTypes.string.isRequired,\n\ttext: PropTypes.string.isRequired,\n\tisLoading: PropTypes.bool.isRequired,\n\tloadingText: PropTypes.string.isRequired,\n\tonClick: PropTypes.func.isRequired,\n};\n\nexport default LoadingBtn;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport format from 'date-fns/format';\nimport useIsMounted from '../lib/useIsMounted';\nimport LoadingBtn from './LoadingBtn';\n\nfunction PostCard({ user, postWithComments, handlePostPublishedUpdate }) {\n\tconst isMounted = useIsMounted();\n\n\tconst [isUpdatingPostPublished, setIsUpdatingPostPublished] = useState(false);\n\n\tasync function handleLoadingBtnClick() {\n\t\tsetIsUpdatingPostPublished(true);\n\t\tawait handlePostPublishedUpdate(postWithComments);\n\t\tisMounted && setIsUpdatingPostPublished(false);\n\t}\n\n\treturn (\n\t\t<div className=\"card mb-2\">\n\t\t\t<div className=\"card-header d-flex justify-content-between\">\n\t\t\t\t<div>\n\t\t\t\t\t<h5 className=\"card-title\">{postWithComments.title}</h5>\n\t\t\t\t\t<p className=\"card-subtitle mb-2\">\n\t\t\t\t\t\t{postWithComments.author.firstName +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tpostWithComments.author.lastName}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"card-subtitle\">\n\t\t\t\t\t\t{format(new Date(postWithComments.createdAt), 'PPpp')}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{user && (\n\t\t\t\t\t\t<LoadingBtn\n\t\t\t\t\t\t\ttype={postWithComments.published ? 'danger' : 'warning'}\n\t\t\t\t\t\t\ttext={postWithComments.published ? 'Unpublish' : 'Publish'}\n\t\t\t\t\t\t\tisLoading={isUpdatingPostPublished}\n\t\t\t\t\t\t\tloadingText={'Updating...'}\n\t\t\t\t\t\t\tonClick={handleLoadingBtnClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"card-body\">\n\t\t\t\t<p className=\"card-text\">{postWithComments.body}</p>\n\t\t\t\t<Link to={`/posts/${postWithComments._id}`} className=\"card-link\">\n\t\t\t\t\t{postWithComments.comments.length} comments\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nPostCard.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n\tpostWithComments: PropTypes.object.isRequired,\n\thandlePostPublishedUpdate: PropTypes.func.isRequired,\n};\n\nexport default PostCard;\n","import PropTypes from 'prop-types';\nimport PostCard from './PostCard';\n\nfunction PostsCards({ user, postsWithComments, handlePostPublishedUpdate }) {\n\tconst Postcards = postsWithComments.map((postWithComments) => (\n\t\t<PostCard\n\t\t\tkey={postWithComments._id}\n\t\t\tuser={user}\n\t\t\tpostWithComments={postWithComments}\n\t\t\thandlePostPublishedUpdate={handlePostPublishedUpdate}\n\t\t/>\n\t));\n\n\treturn <>{Postcards}</>;\n}\n\nPostsCards.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n\tpostsWithComments: PropTypes.array.isRequired,\n\thandlePostPublishedUpdate: PropTypes.func.isRequired,\n};\n\nexport default PostsCards;\n","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport useIsMounted from '../lib/useIsMounted';\nimport { getData, putPostPublished, handleExpressErr } from '../lib/helpers';\nimport BootstrapSpinner from '../components/BootstrapSpinner';\nimport PostsCards from './PostsCards';\n\nfunction Posts({ user }) {\n\tconst isMounted = useIsMounted();\n\n\tconst [postsWithComments, setPostsWithComments] = useState([]);\n\n\tconst [\n\t\tisFetchingPostsWithComments,\n\t\tsetIsFetchingPostsWithComments,\n\t] = useState(false);\n\n\tasync function handlePostPublishedUpdate(postWithComments) {\n\t\tconst updatedPost = await putPostPublished(postWithComments);\n\t\tif (isMounted && updatedPost._id) {\n\t\t\tsetPostsWithComments((prevPostsWithComments) => {\n\t\t\t\treturn prevPostsWithComments.map((prevPostWithComments) => {\n\t\t\t\t\tif (prevPostWithComments._id !== postWithComments._id) {\n\t\t\t\t\t\treturn prevPostWithComments;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prevPostWithComments,\n\t\t\t\t\t\t\tpublished: updatedPost.published,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tasync function fetchAndSetPostsWithComments() {\n\t\t\tasync function fetchPosts() {\n\t\t\t\ttry {\n\t\t\t\t\tconst data = await getData(`${process.env.REACT_APP_API_URL}/posts`);\n\t\t\t\t\tif (data.err) {\n\t\t\t\t\t\thandleExpressErr(data.err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn data.posts;\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\twindow.flashes([\n\t\t\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tasync function fetchAndAttachPostsToComments(posts) {\n\t\t\t\ttry {\n\t\t\t\t\tconst postsWithComments = await Promise.all(\n\t\t\t\t\t\tposts.map(async (post) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst data = await getData(\n\t\t\t\t\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}/comments`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (data.err) {\n\t\t\t\t\t\t\t\t\thandleExpressErr(data.err);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn { ...post, comments: data.comments };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\twindow.flashes([\n\t\t\t\t\t\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\treturn postsWithComments;\n\t\t\t\t} catch (err) {\n\t\t\t\t\twindow.flashes([\n\t\t\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isMounted) {\n\t\t\t\tsetIsFetchingPostsWithComments(true);\n\t\t\t\tconst posts = await fetchPosts();\n\t\t\t\tconst newPostsWithComments = await fetchAndAttachPostsToComments(posts);\n\t\t\t\tsetIsFetchingPostsWithComments(false);\n\t\t\t\tsetPostsWithComments(newPostsWithComments);\n\t\t\t}\n\t\t}\n\n\t\tfetchAndSetPostsWithComments();\n\t}, [isMounted]);\n\n\treturn isFetchingPostsWithComments ? (\n\t\t<div className=\"bootstrap-spinner-container\">\n\t\t\t<BootstrapSpinner type={'border'} size={'2em'} />\n\t\t</div>\n\t) : (\n\t\t<section className=\"position-relative\">\n\t\t\t<PostsCards\n\t\t\t\tuser={user}\n\t\t\t\tpostsWithComments={postsWithComments}\n\t\t\t\thandlePostPublishedUpdate={handlePostPublishedUpdate}\n\t\t\t/>\n\t\t</section>\n\t);\n}\n\nPosts.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n};\n\nexport default Posts;\n","import PropTypes from 'prop-types';\nimport Posts from '../components/Posts';\n\nfunction PostsPage({ user }) {\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-md-8\">\n\t\t\t\t\t<Posts user={user} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nPostsPage.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n};\n\nexport default PostsPage;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport format from 'date-fns/format';\nimport useIsMounted from '../lib/useIsMounted';\nimport LoadingBtn from './LoadingBtn';\n\nfunction PostComment({ postComment, handlePostCommentDelete }) {\n\tconst isMounted = useIsMounted();\n\n\tconst [isDeletingPostComment, setIsDeletingPostComment] = useState(false);\n\n\tasync function handleLoadingBtnClick() {\n\t\tsetIsDeletingPostComment(true);\n\t\tawait handlePostCommentDelete(postComment._id);\n\t\tisMounted && setIsDeletingPostComment(false);\n\t}\n\n\treturn (\n\t\t<li className=\"list-group-item d-flex justify-content-between\">\n\t\t\t<div>\n\t\t\t\t<p className=\"h6 mb-1\">\n\t\t\t\t\t{postComment.author.firstName + ' ' + postComment.author.lastName}\n\t\t\t\t</p>\n\t\t\t\t<p className=\"text-muted mb-2\">\n\t\t\t\t\t{format(new Date(postComment.createdAt), 'PPpp')}\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mb-2\">{postComment.body}</p>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<LoadingBtn\n\t\t\t\t\ttype={'danger'}\n\t\t\t\t\ttext={'Delete'}\n\t\t\t\t\tisLoading={isDeletingPostComment}\n\t\t\t\t\tloadingText={'Deleting...'}\n\t\t\t\t\tonClick={handleLoadingBtnClick}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</li>\n\t);\n}\n\nPostComment.propTypes = {\n\tpostComment: PropTypes.object.isRequired,\n\thandlePostCommentDelete: PropTypes.func.isRequired,\n};\n\nexport default PostComment;\n","import PropTypes from 'prop-types';\nimport PostComment from './PostComment';\n\nfunction PostComments({ postComments, handlePostCommentDelete }) {\n\treturn postComments.length > 0 ? (\n\t\t<ul className=\"list-group\">\n\t\t\t{postComments.map((postComment) => (\n\t\t\t\t<PostComment\n\t\t\t\t\tkey={postComment._id}\n\t\t\t\t\tpostComment={postComment}\n\t\t\t\t\thandlePostCommentDelete={handlePostCommentDelete}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</ul>\n\t) : null;\n}\n\nPostComments.propTypes = {\n\tpostComments: PropTypes.array.isRequired,\n\thandlePostCommentDelete: PropTypes.func.isRequired,\n};\n\nexport default PostComments;\n","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useParams, useHistory } from 'react-router-dom';\nimport useIsMounted from '../lib/useIsMounted';\nimport {\n\tgetData,\n\tputPostPublished,\n\tdeletePostComment,\n\thandleExpressErr,\n} from '../lib/helpers';\nimport BootstrapSpinner from '../components/BootstrapSpinner';\nimport PostCard from './PostCard';\nimport PostComments from './PostComments';\n\nfunction Post({ user }) {\n\tconst { postId } = useParams();\n\tconst history = useHistory();\n\n\tconst isMounted = useIsMounted();\n\n\tconst [isFetchingPostWithComments, setIsFetchingPostWithComments] = useState(\n\t\tfalse\n\t);\n\n\tconst [postWithComments, setPostWithComments] = useState({});\n\n\tasync function fetchPostComments(postId) {\n\t\ttry {\n\t\t\tconst data = await getData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${postId}/comments`\n\t\t\t);\n\t\t\tif (data.err) {\n\t\t\t\thandleExpressErr(data.err);\n\t\t\t} else {\n\t\t\t\treturn data.comments;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\twindow.flashes([\n\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t]);\n\t\t}\n\t}\n\n\tasync function fetchAndSetPostWithComments() {\n\t\tasync function fetchPost(postId) {\n\t\t\ttry {\n\t\t\t\tconst data = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${postId}`\n\t\t\t\t);\n\t\t\t\tif (data.err) {\n\t\t\t\t\tif ([401, 404].includes(data.err.status)) {\n\t\t\t\t\t\thistory.push('/');\n\t\t\t\t\t}\n\t\t\t\t\thandleExpressErr(data.err);\n\t\t\t\t} else {\n\t\t\t\t\treturn data.post;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.flashes([\n\t\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\tif (isMounted) {\n\t\t\tsetIsFetchingPostWithComments(true);\n\t\t\tconst post = await fetchPost(postId);\n\t\t\tconst postComments = await fetchPostComments(postId);\n\t\t\tsetIsFetchingPostWithComments(false);\n\t\t\tsetPostWithComments({ ...post, comments: postComments });\n\t\t}\n\t}\n\n\tasync function handlePostPublishedUpdate(postWithComments) {\n\t\tconst updatedPost = await putPostPublished(postWithComments);\n\t\tif (isMounted && updatedPost._id) {\n\t\t\tsetPostWithComments((prevPostWithComments) => ({\n\t\t\t\t...prevPostWithComments,\n\t\t\t\tpublished: updatedPost.published,\n\t\t\t}));\n\t\t}\n\t}\n\n\tasync function handlePostCommentDelete(postCommentId) {\n\t\tconst deletedPostComment = await deletePostComment(postId, postCommentId);\n\t\tif (isMounted && deletedPostComment._id) {\n\t\t\tsetPostWithComments((prevPostWithComments) => ({\n\t\t\t\t...prevPostWithComments,\n\t\t\t\tcomments: prevPostWithComments.comments.filter(\n\t\t\t\t\t(comment) => comment._id !== postCommentId\n\t\t\t\t),\n\t\t\t}));\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tfetchAndSetPostWithComments();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [isMounted]);\n\n\treturn isFetchingPostWithComments ? (\n\t\t<div className=\"bootstrap-spinner-container\">\n\t\t\t<BootstrapSpinner type={'border'} size={'2em'} />\n\t\t</div>\n\t) : postWithComments._id ? (\n\t\t<section className=\"mb-4\">\n\t\t\t<PostCard\n\t\t\t\tuser={user}\n\t\t\t\tpostWithComments={postWithComments}\n\t\t\t\thandlePostPublishedUpdate={handlePostPublishedUpdate}\n\t\t\t/>\n\t\t\t<PostComments\n\t\t\t\tpostComments={postWithComments.comments}\n\t\t\t\thandlePostCommentDelete={handlePostCommentDelete}\n\t\t\t/>\n\t\t</section>\n\t) : null;\n}\n\nPost.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n};\n\nexport default Post;\n","import PropTypes from 'prop-types';\nimport Post from '../components/Post';\n\nfunction PostPage({ user }) {\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-md-8 position-relative\">\n\t\t\t\t\t<Post user={user} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nPostPage.propTypes = {\n\tuser: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]).isRequired,\n};\n\nexport default PostPage;\n","import PropTypes from 'prop-types';\n\nfunction SubmitBtn({ text, isSubmitting }) {\n\treturn isSubmitting ? (\n\t\t<button type=\"submit\" className=\"btn btn-primary w-100\" disabled>\n\t\t\t<span\n\t\t\t\tclassName=\"spinner-border spinner-border-sm\"\n\t\t\t\trole=\"status\"\n\t\t\t\taria-hidden=\"true\"\n\t\t\t></span>\n\t\t\tSubmitting...\n\t\t</button>\n\t) : (\n\t\t<button type=\"submit\" className=\"btn btn-primary w-100\">\n\t\t\t{text}\n\t\t</button>\n\t);\n}\n\nSubmitBtn.defaultProps = {\n\ttext: 'Submit',\n};\n\nSubmitBtn.propTypes = {\n\ttext: PropTypes.string.isRequired,\n\tisSubmitting: PropTypes.bool.isRequired,\n};\n\nexport default SubmitBtn;\n","import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport useIsMounted from '../lib/useIsMounted';\nimport { uploadData, handleExpressErr } from '../lib/helpers';\nimport SubmitBtn from './SubmitBtn';\n\nfunction SignUpForm() {\n\tconst history = useHistory();\n\n\tconst isMounted = useIsMounted();\n\n\tconst [state, setState] = useState({\n\t\tfirstName: '',\n\t\tlastName: '',\n\t\tusername: '',\n\t\tpassword: '',\n\t\tconfirmPassword: '',\n\t\tadminPasscode: '',\n\t});\n\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\n\tfunction handleInputChange(e) {\n\t\tconst target = e.target;\n\t\tconst name = target.name;\n\t\tconst value = target.value;\n\t\tsetState((prevState) => ({ ...prevState, [name]: value }));\n\t}\n\n\tasync function handleSubmit(e) {\n\t\ttry {\n\t\t\te.preventDefault();\n\t\t\tsetIsSubmitting(true);\n\t\t\tconst data = await uploadData(\n\t\t\t\t'POST',\n\t\t\t\t`${process.env.REACT_APP_API_URL}/users`,\n\t\t\t\t{ ...state, isAdminPasscodeRequired: true }\n\t\t\t);\n\t\t\tisMounted && setIsSubmitting(false);\n\t\t\tif (data.err) {\n\t\t\t\thandleExpressErr(data.err);\n\t\t\t} else if (data.errors) {\n\t\t\t\tisMounted &&\n\t\t\t\t\tsetState({\n\t\t\t\t\t\tfirstName: data.userFormData.firstName,\n\t\t\t\t\t\tlastName: data.userFormData.lastName,\n\t\t\t\t\t\tusername: data.userFormData.username,\n\t\t\t\t\t\tpassword: '',\n\t\t\t\t\t\tconfirmPassword: '',\n\t\t\t\t\t\tadminPasscode: '',\n\t\t\t\t\t});\n\t\t\t\twindow.flashes(data.errors);\n\t\t\t} else {\n\t\t\t\twindow.flashes([\n\t\t\t\t\t{ msg: 'You have successfuly signed up', type: 'success' },\n\t\t\t\t]);\n\t\t\t\thistory.push('/');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\twindow.flashes([\n\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t]);\n\t\t}\n\t}\n\n\treturn (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"firstName\">First name</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"firstName\"\n\t\t\t\t\tplaceholder=\"John\"\n\t\t\t\t\tname=\"firstName\"\n\t\t\t\t\tvalue={state.firstName}\n\t\t\t\t\trequired\n\t\t\t\t\tmaxLength=\"255\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"lastName\">Last name</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"lastName\"\n\t\t\t\t\tplaceholder=\"Doe\"\n\t\t\t\t\tname=\"lastName\"\n\t\t\t\t\tvalue={state.lastName}\n\t\t\t\t\trequired\n\t\t\t\t\tmaxLength=\"255\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"username\"\n\t\t\t\t\tplaceholder=\"johnDoe01\"\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tvalue={state.username}\n\t\t\t\t\trequired\n\t\t\t\t\tmaxLength=\"20\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tvalue={state.password}\n\t\t\t\t\trequired\n\t\t\t\t\tminLength=\"8\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"confirmPassword\">Password confirmation</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"confirmPassword\"\n\t\t\t\t\tname=\"confirmPassword\"\n\t\t\t\t\tvalue={state.confirmPassword}\n\t\t\t\t\trequired\n\t\t\t\t\tminLength=\"8\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"adminPasscode\">Admin passcode</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"adminPasscode\"\n\t\t\t\t\tname=\"adminPasscode\"\n\t\t\t\t\tvalue={state.adminPasscode}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SubmitBtn isSubmitting={isSubmitting} />\n\t\t</form>\n\t);\n}\n\nexport default SignUpForm;\n","import SignUpForm from '../components/SignUpForm';\n\nfunction SignUpPage() {\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-md-6\">\n\t\t\t\t\t<SignUpForm />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default SignUpPage;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport useIsMounted from '../lib/useIsMounted';\nimport { uploadData, handleExpressErr } from '../lib/helpers';\nimport SubmitBtn from './SubmitBtn';\n\nfunction SignInForm({ setUser }) {\n\tconst history = useHistory();\n\n\tconst isMounted = useIsMounted();\n\n\tconst [state, setState] = useState({\n\t\tusername: '',\n\t\tpassword: '',\n\t});\n\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\n\tfunction handleInputChange(e) {\n\t\tconst target = e.target;\n\t\tconst name = target.name;\n\t\tconst value = target.value;\n\t\tsetState((prevState) => ({ ...prevState, [name]: value }));\n\t}\n\n\tasync function handleSubmit(e) {\n\t\ttry {\n\t\t\te.preventDefault();\n\t\t\tsetIsSubmitting(true);\n\t\t\tconst data = await uploadData(\n\t\t\t\t'POST',\n\t\t\t\t`${process.env.REACT_APP_API_URL}/auth/sign-in`,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tisMounted && setIsSubmitting(false);\n\t\t\tif (data.err) {\n\t\t\t\tisMounted && setState((prevState) => ({ ...prevState, password: '' }));\n\t\t\t\thandleExpressErr(data.err);\n\t\t\t} else {\n\t\t\t\tif (data.user && data.user.admin) {\n\t\t\t\t\tlocalStorage.setItem('jwt', data.token);\n\t\t\t\t\tsetUser(data.user);\n\t\t\t\t\twindow.flashes([\n\t\t\t\t\t\t{ msg: 'You have successfuly signed in', type: 'success' },\n\t\t\t\t\t]);\n\t\t\t\t\thistory.push('/');\n\t\t\t\t} else {\n\t\t\t\t\tisMounted && setState({ username: '', password: '' });\n\t\t\t\t\twindow.flashes([\n\t\t\t\t\t\t{ msg: `Admin account is required`, type: 'warning' },\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\twindow.flashes([\n\t\t\t\t{ msg: 'Something went wrong, please try again later.' },\n\t\t\t]);\n\t\t}\n\t}\n\n\treturn (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"username\"\n\t\t\t\t\tplaceholder=\"johnDoe01\"\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tvalue={state.username}\n\t\t\t\t\trequired\n\t\t\t\t\tmaxLength=\"20\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tvalue={state.password}\n\t\t\t\t\trequired\n\t\t\t\t\tminLength=\"8\"\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SubmitBtn isSubmitting={isSubmitting} />\n\t\t</form>\n\t);\n}\n\nSignInForm.propTypes = {\n\tsetUser: PropTypes.func.isRequired,\n};\n\nexport default SignInForm;\n","import SignInForm from '../components/SignInForm';\n\nfunction SignInPage({ setUser }) {\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-md-6\">\n\t\t\t\t\t<SignInForm setUser={setUser} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default SignInPage;\n","import { useState, useEffect } from 'react';\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom';\nimport { nanoid } from 'nanoid';\nimport { getData } from './lib/helpers';\nimport Bus from './utils/Bus';\nimport BootstrapSpinner from './components/BootstrapSpinner';\nimport Navbar from './components/Navbar';\nimport Flashes from './components/Flashes';\nimport PostsPage from './pages/PostsPage';\nimport PostPage from './pages/PostPage';\nimport SignUpPage from './pages/SignUpPage';\nimport SignInPage from './pages/SignInPage';\nimport './App.css';\n\nfunction App() {\n\tconst history = useHistory();\n\n\tconst [flashes, setFlashes] = useState([]);\n\tconst [user, setUser] = useState(null);\n\n\tfunction signOut() {\n\t\tlocalStorage.removeItem('jwt');\n\t\tsetUser(false);\n\t\twindow.flashes([\n\t\t\t{ msg: 'You have successfully signed out', type: 'success' },\n\t\t]);\n\t\thistory.push('/');\n\t}\n\n\tfunction handleFlashDelete(flashId) {\n\t\tconst newFlashes = flashes.filter((flash) => flash.id !== flashId);\n\t\tsetFlashes(newFlashes);\n\t}\n\n\tuseEffect(() => {\n\t\tBus.addListener('flashes', (flashes) => {\n\t\t\tconst flashesWithId = flashes.map((flash) => ({\n\t\t\t\t...flash,\n\t\t\t\tid: nanoid(),\n\t\t\t}));\n\t\t\tsetFlashes(flashesWithId);\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\twindow.flashes = (flashes) => Bus.emit('flashes', flashes);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (flashes.length > 0) {\n\t\t\tconst timeoutId = setTimeout(() => setFlashes([]), 4000);\n\t\t\treturn () => clearTimeout(timeoutId);\n\t\t}\n\t}, [flashes]);\n\n\tuseEffect(() => {\n\t\tasync function fetchAndSetUser() {\n\t\t\tconst data = await getData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/users/current-user`\n\t\t\t);\n\t\t\tif (data.user && data.user.admin) {\n\t\t\t\tsetUser(data.user);\n\t\t\t} else {\n\t\t\t\tlocalStorage.removeItem('jwt');\n\t\t\t\tsetUser(false);\n\t\t\t}\n\t\t}\n\t\tfetchAndSetUser();\n\t\tconst intervalId = setInterval(fetchAndSetUser, 30000);\n\t\treturn () => clearInterval(intervalId);\n\t}, []);\n\n\treturn user === null ? (\n\t\t<BootstrapSpinner type={'grow'} size={'3em'} />\n\t) : (\n\t\t<>\n\t\t\t<Navbar user={user} signOut={signOut} />\n\t\t\t{flashes.length > 0 && (\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t\t\t<div className=\"col-md-8\">\n\t\t\t\t\t\t\t<Flashes\n\t\t\t\t\t\t\t\tflashes={flashes}\n\t\t\t\t\t\t\t\thandleFlashDelete={handleFlashDelete}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<main>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t\t<Redirect to=\"/posts\" />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/posts\">\n\t\t\t\t\t\t{user ? <PostsPage user={user} /> : <Redirect to=\"/sign-in\" />}\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/posts/:postId\">\n\t\t\t\t\t\t{user ? <PostPage user={user} /> : <Redirect to=\"/sign-in\" />}\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/sign-up\">\n\t\t\t\t\t\t{user ? <Redirect to=\"/posts\" /> : <SignUpPage />}\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/sign-in\">\n\t\t\t\t\t\t{user ? <Redirect to=\"posts\" /> : <SignInPage setUser={setUser} />}\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</main>\n\t\t</>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import dotenv from 'dotenv';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport 'bootswatch/dist/litera/bootstrap.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.js';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\ndotenv.config();\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Router basename={process.env.PUBLIC_URL}>\n\t\t\t<App />\n\t\t</Router>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}